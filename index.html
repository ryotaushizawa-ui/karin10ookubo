<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mç”·è»¢ç”Ÿï½å¥³ç¥ã«Mç”·è¨ºæ–­ã•ã‚Œã¦å¥³å‹‡è€…ã«ã‚¤ã‹ã•ã‚Œã‚‹ï½</title>
    <style>
        :root { --primary: #9d50bb; --bg: #0f0c29; --text: #ffffff; --gold: #ffeb3b; --x-color: #000000; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow-y: auto; padding: 20px 0; }
        
        #game-box { width: 92%; max-width: 480px; background: #1a1a2e; padding: 25px; border: 4px solid var(--primary); text-align: center; box-shadow: 10px 10px 0px #000; position: relative; }
        
        /* å¥³ç¥æ¼”å‡ºç”¨ */
        .goddess-content { opacity: 0; transition: opacity 2s; display: none; }
        .goddess-visible { opacity: 1 !important; display: block !important; }

        /* ãƒˆãƒ©ãƒƒã‚¯æ¼”å‡ºç”¨ */
        #accident-scene { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 9999; display: none; align-items: center; justify-content: center; }
        #truck { position: absolute; font-size: 8rem; right: -250px; z-index: 10001; }
        #accident-txt { color: #000; font-size: 2rem; font-weight: bold; z-index: 10000; }

        /* ãƒãƒ™ãƒ«ç”»é¢ */
        #novel-text { line-height: 1.8; font-size: 1.1rem; min-height: 120px; padding: 20px; display: flex; align-items: center; justify-content: center; }
        .skip-link { display: inline-block; margin-top: 20px; color: #888; text-decoration: underline; cursor: pointer; font-size: 0.8rem; }

        .logo-img { width: 100%; max-width: 320px; margin-bottom: 25px; }
        .goddess-img { width: 100%; height: auto; border: 2px solid #fff; background: #333; display: block; margin: 0 auto; }
        
        .msg-bubble { background: #fff; color: #000; padding: 15px; border-radius: 10px; margin-top: 25px; margin-bottom: 20px; font-weight: bold; font-size: 0.85rem; position: relative; min-height: 3em; display: flex; align-items: center; justify-content: center; }
        .msg-bubble::after { content: ""; position: absolute; top: -15px; left: 30px; border-width: 0 12px 15px 12px; border-style: solid; border-color: transparent transparent #ffffff transparent; }

        #user-name { padding: 12px; width: 80%; margin-bottom: 20px; border-radius: 5px; border: 2px solid var(--primary); text-align: center; font-size: 1rem; background: #000; color: #fff; }

        .choices { display: grid; gap: 8px; }
        button { background: #eee; border: none; padding: 15px; font-weight: bold; cursor: pointer; box-shadow: 4px 4px 0px #666; font-size: 1rem; color: #000; transition: 0.1s; width: 100%; }
        button:hover { background: var(--gold); transform: translate(2px, 2px); box-shadow: 2px 2px 0px #666; }
        
        .hidden { display: none !important; }
        .job-res { font-size: 2.2rem; color: var(--gold); text-shadow: 2px 2px #000; margin: 10px 0; font-weight: bold; }
        .stats { text-align: left; background: #000; padding: 12px; border: 1px dashed var(--gold); font-size: 0.8rem; line-height: 1.5; }
        .option-box { margin-top: 10px; padding: 8px; background: #222; border-left: 4px solid #f00; color: #ff8888; font-weight: bold; font-size: 0.9rem; }
        #q-num { color: var(--gold); font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; }
        
        footer { margin-top: 30px; color: #666; font-size: 0.7rem; text-align: center; line-height: 1.6; }
    </style>
</head>
<body>

<div id="accident-scene">
    <div id="truck">ğŸššğŸ’¨</div>
    <div id="accident-txt">ã‚ï¼å±ãªã„ï¼ï¼</div>
</div>

<div id="game-box">
    <div id="title-screen">
        <img src="logo.png" class="logo-img" alt="Mç”·è»¢ç”Ÿ ãƒ­ã‚´">
        <p style="margin-bottom: 30px; color: #aaa;">ï½å¥³ç¥ã«Mç”·è¨ºæ–­ã•ã‚Œã¦å¥³å‹‡è€…ã«ã‚¤ã‹ã•ã‚Œã‚‹ï½</p>
        <button onclick="goToNameInput()">ç•°ä¸–ç•Œã¸è»¢ç”Ÿã™ã‚‹</button>
    </div>

    <div id="name-input-screen" class="hidden">
        <h3 style="color: var(--gold);">è»¢ç”Ÿå‰ã®åå‰ã‚’æ•™ãˆã¦ï¼Ÿ</h3>
        <input type="text" id="user-name" placeholder="åå‰ã‚’å…¥åŠ›..." maxlength="15">
        <button onclick="startNovel()">ã“ã®åå‰ã§è»¢ç”Ÿã‚’é–‹å§‹</button>
    </div>

    <div id="novel-screen" class="hidden">
        <div id="novel-text"></div>
        <div style="margin-top: 20px;">
            <button onclick="nextNovel()" style="width: auto; padding: 10px 40px;">æ¬¡ã¸</button>
            <br>
            <span class="skip-link" onclick="skipToQuiz()">â‰« å…¨æ¼”å‡ºã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦å³è¨ºæ–­</span>
        </div>
    </div>

    <div id="goddess-wrap" class="goddess-content">
        <img src="megami.jpg" id="goddess-image" class="goddess-img" alt="å¥³ç¥ç”»åƒ">
        <div id="goddess-comment" class="msg-bubble"></div>
        <div id="quiz" class="hidden">
            <div id="q-num"></div>
            <div id="q-text" style="margin-bottom: 20px; font-weight: bold; min-height: 3em; font-size: 0.95rem;"></div>
            <div class="choices" id="choices"></div>
        </div>
    </div>

    <div id="result" class="hidden">
        <div style="font-weight: bold; font-size: 0.8rem;">é‘‘å®šçµæœï¼š<span id="res-name-label"></span>ã®ã‚¸ãƒ§ãƒ–ã¯â€¦</div>
        <div class="job-res" id="job-name"></div>
        <div class="stats" id="detail"></div>
        <button id="btn-share" class="share-btn" style="background: #000; color: #fff; margin-top: 15px;">çµæœã‚’Xã§ã‚·ã‚§ã‚¢</button>
        <button onclick="location.reload()" style="margin-top:15px; background: #999;">ã‚¿ã‚¤ãƒˆãƒ«ã¸æˆ»ã‚‹</button>
    </div>
</div>

<footer>
    ã‹ã‚Šã‚“ã¨å¤§ä¹…ä¿ãƒ»æ–°å¤§ä¹…ä¿åº—presents<br>
    Mç”·è»¢ç”Ÿproject
</footer>

<script>
    const commentBox = document.getElementById('goddess-comment');
    const goddessWrap = document.getElementById('goddess-wrap');
    let finalJobName = "";
    let userName = "";

    function goToNameInput() {
        document.getElementById('title-screen').classList.add('hidden');
        document.getElementById('name-input-screen').classList.remove('hidden');
    }

    const getScenario = (name) => [
        `ä¿ºã®åå‰ã¯ã€${name}ã€‚`,
        "ã”ãæ™®é€šã®ã€ã©ã“ã«ã§ã‚‚ã‚ã‚‹å¹³å‡¡ãªæ¯æ—¥ã‚’é€ã‚‹ç”·ã ã€‚",
        "ä»•äº‹å¸°ã‚Šã®ã‚³ãƒ³ãƒ“ãƒ‹ã€‚ã„ã¤ã‚‚ã®ã‚³ãƒ¼ãƒ’ãƒ¼ã€‚ãã‚ŒãŒå”¯ä¸€ã®ç™’ã‚„ã—ã ã£ãŸã€‚",
        "ã ãŒã€ãµã¨è¦‹ä¸Šã’ãŸå¤œç©ºã«ã€è¦‹ãŸã“ã¨ã‚‚ãªã„è‰²ã®æ˜ŸãŒæµã‚ŒãŸæ°—ãŒã—ãŸã€‚",
        "ã€Œâ€¦â€¦ã‚“ï¼Ÿã€",
        "èƒŒå¾Œã‹ã‚‰ã€ä¸è‡ªç„¶ãªã»ã©ã®ç†±é¢¨ã¨ã€é¼“è†œã‚’éœ‡ã‚ã›ã‚‹è½ŸéŸ³ãŒè¿«ã‚‹ã€‚",
        "æŒ¯ã‚Šè¿”ã‚‹ã¨ã€ãã“ã«ã¯å…‰ã‚Šè¼ããƒˆãƒ©ãƒƒã‚¯ãŒâ€•â€•"
    ];
    let novelIndex = 0;
    let currentScenario = [];

    function startNovel() {
        userName = document.getElementById('user-name').value || "åç„¡ã—";
        currentScenario = getScenario(userName);
        document.getElementById('name-input-screen').classList.add('hidden');
        document.getElementById('novel-screen').classList.remove('hidden');
        showNextSentence();
    }

    function showNextSentence() {
        if (novelIndex < currentScenario.length) {
            document.getElementById('novel-text').innerText = currentScenario[novelIndex];
            novelIndex++;
        } else {
            startAccident();
        }
    }

    function nextNovel() { showNextSentence(); }

    function skipToQuiz() {
        userName = document.getElementById('user-name').value || "åç„¡ã—";
        document.querySelectorAll('#game-box > div').forEach(div => div.classList.add('hidden'));
        goddessWrap.classList.add('goddess-visible');
        document.getElementById('quiz').classList.remove('hidden');
        commentBox.innerText = `ã€Œã²ã©ã„äº‹æ•…ã ã£ãŸã‚ã­ã€${userName}ã€‚æœ€è¿‘åœ°çƒã§äººæ°—ãªç•°ä¸–ç•Œè»¢ç”Ÿãƒ¢ãƒï¼Ÿã®ã›ã„ã§è»¢ç”Ÿè€…ãŒçµ¶ãˆãªã„ã®ã€‚æ‚ªã„ã‘ã©Mç”·æ ã—ã‹ç©ºã„ã¦ãªã„ã‚ã€`;
        showQ();
    }

    function startAccident() {
        document.getElementById('novel-screen').classList.add('hidden');
        const scene = document.getElementById('accident-scene');
        const truck = document.getElementById('truck');
        const txt = document.getElementById('accident-txt');
        scene.style.display = 'flex';
        let pos = -250;
        const drive = setInterval(() => {
            pos += 12;
            truck.style.right = pos + 'px';
            if (pos > window.innerWidth / 2 - 50) {
                txt.innerText = "ã‚¬ã‚·ãƒ£ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ³ï¼ï¼";
                scene.style.background = "red";
            }
            if (pos > window.innerWidth + 300) { clearInterval(drive); }
        }, 10);

        setTimeout(() => {
            scene.style.background = "#fff";
            txt.innerText = "";
            truck.style.display = "none";
            setTimeout(() => {
                scene.style.opacity = "0";
                setTimeout(() => {
                    scene.style.display = 'none';
                    goddessWrap.classList.add('goddess-visible');
                    document.getElementById('quiz').classList.remove('hidden');
                    commentBox.innerText = `ã€Œã²ã©ã„äº‹æ•…ã ã£ãŸã‚ã­ã€${userName}ã€‚æœ€è¿‘åœ°çƒã§äººæ°—ãªç•°ä¸–ç•Œè»¢ç”Ÿãƒ¢ãƒï¼Ÿã®ã›ã„ã§è»¢ç”Ÿè€…ãŒçµ¶ãˆãªã„ã®ã€‚æ‚ªã„ã‘ã©Mç”·æ ã—ã‹ç©ºã„ã¦ãªã„ã‚ã€`;
                    showQ();
                }, 1000);
            }, 1000);
        }, 3000);
    }

    // ã‚¸ãƒ§ãƒ–ãƒ»è³ªå•ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ›´ãªã—ï¼ˆé•·ããªã‚‹ãŸã‚çœç•¥ã›ãšå«ã‚ã¦ã„ã¾ã™ï¼‰
    const jobs = {
        alchemist: { n: "å®Ÿé¨“ä½“éŒ¬é‡‘è¡“å¸«", s: "åŠ‡è–¬è€æ€§(å¿«æ„Ÿ)", i: "æ€ªã—ã„è–¬ã®è©¦é¨“ç®¡", o: "ãƒãƒƒãƒ”ãƒ¼ã‚»ãƒƒãƒˆ", c: "å¥³å‹‡è€…ã®ä½œã‚‹æ€ªã—ã„ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–œã‚“ã§é£²ã¿å¹²ã™å§¿â€¦â€¦ç«‹æ´¾ãªå¤‰æ…‹ã­ã€‚" },
        dog: { n: "å‹‡è€…ã®ãƒšãƒƒãƒˆï¼ˆçŠ¬ï¼‰", s: "ãŠæ‰‹ãƒ»ãŠã‹ã‚ã‚Š", i: "ãƒˆã‚²ä»˜ãã®é¦–è¼ª", o: "Mã‚»ãƒƒãƒˆ", c: "äººé–“ã‚’ã‚„ã‚ã¦çŠ¬ã¨ã—ã¦ç”Ÿãã‚‹é“ã‚’é¸ã‚“ã ã®ã­ã€‚å››ã¤ã‚“é€™ã„ã§é€™ã„ã¤ãã°ã‚Šãªã•ã„ï¼" },
        floor: { n: "é«˜æ©Ÿèƒ½ãªåºŠ", s: "è¸ã¾ã‚Œå¿ƒåœ°ã®è¿½æ±‚", i: "é«˜ç´šãªãƒ¯ãƒƒã‚¯ã‚¹", o: "è¸ã¿ã¤ã‘", c: "ã‚‚ã¯ã‚„ç”Ÿç‰©ã§ã™ã‚‰ãªã„ã‚ã€‚å¥³å‹‡è€…ã«è¸ã¾ã‚Œã‚‹ãŸã‚ã ã‘ã®ã€ŒåºŠã€ãŒãŠä¼¼åˆã„ã‚ˆã€‚" },
        knight: { n: "å±ˆè¾±ã®é¨å£«", s: "ãƒ—ãƒ©ã‚¤ãƒ‰å´©å£Š", i: "ãƒœãƒ­ãƒœãƒ­ã®å®¶ç´‹æ——", o: "é¡”é¢é¨ä¹—", c: "é«˜æ½”ãªé¨å£«ãŒå¥³å‹‡è€…ã«å®Œæ•—ã—ã¦è·ªãâ€¦â€¦ãã®ã‚®ãƒ£ãƒƒãƒ—ãŒãŸã¾ã‚‰ãªã„ã‚“ã§ã—ã‚‡ï¼Ÿ" },
        mage: { n: "é­”åŠ›ä¾›çµ¦ç”¨ã®æ–", s: "æ¾å–ã•ã‚Œã‚‹é­”åŠ›", i: "é­”åŠ›ã‚’å¸ã„å–ã‚‹é­”çŸ³", o: "åŒ‚ã„ã‹ã", c: "è‡ªåˆ†ã¯é­”æ³•ã‚’æ”¾ã¦ãšã€ãŸã å¥³å‹‡è€…ã«é­”åŠ›ã‚’å¸ã„å–ã‚‰ã‚Œã‚‹ã ã‘ã®é“å…·ã­ã€‚" },
        slime: { n: "ãŠæƒé™¤ã‚¹ãƒ©ã‚¤ãƒ ", s: "å…¨èº«ç²˜æ¶²", i: "å‹‡è€…ã®é´ç£¨ãã‚»ãƒƒãƒˆ", o: "æŒ‡ã‚¢ãƒŠãƒ«", c: "è¸ã¾ã‚Œã¦ã‚‚æ–¬ã‚‰ã‚Œã¦ã‚‚å–œã¶ã‚¹ãƒ©ã‚¤ãƒ ã€‚å¥³å‹‡è€…ã®è¶³å…ƒã®æ±šã‚Œã‚’èˆã‚ã¨ã£ã¦ãªã•ã„ã€‚" },
        shield: { n: "äººé–“ç›¾", s: "ãƒ€ãƒ¡ãƒ¼ã‚¸å…¨å¸å", i: "ãƒœãƒ­ãƒœãƒ­ã®é‰„æ¿", o: "æ‹˜æŸã€ä¹³é¦–èˆã‚", c: "æ”»æ’ƒã‚’é¿ã‘ã‚‹ãªã‚“ã¦è¨€èªé“æ–­ã€‚ã™ã¹ã¦ã®è‹¦ç—›ã‚’æ­£é¢ã‹ã‚‰å—ã‘æ­¢ã‚ã‚‹ã®ãŒã‚¢ãƒ³ã‚¿ã®é‹å‘½ã‚ˆã€‚" },
        slave: { n: "çµ‚èº«åˆ‘ã®å¥´éš·", s: "çµ¶å¯¾æœå¾“", i: "å¤–ã‚Œãªã„é‰„æ·", o: "ãƒ“ãƒ³ã‚¿ã€è¹´ã‚Šã€ç›®éš ã—ã€æ‹˜æŸ", c: "åå‰ã™ã‚‰å¥ªã‚ã‚Œã¦ã€ãŸã ã®ç•ªå·ã§å‘¼ã°ã‚Œã‚‹å¿«æ„Ÿã€‚ä¸€ç”Ÿå½¼å¥³ã®æ‰€æœ‰ç‰©ã­ã€‚" }
    };

    const goddessQuotes = ["ã€Œã¸ã‡ãƒ¼ã€ãã‚“ãªã®ãŒå¥½ããªã‚“ã ï¼Ÿã€", "ã€Œç´ ç›´ã§ã‚ˆã‚ã—ã„ã‚ï¼ã€", "ã€Œã‚¢ãƒ³ã‚¿ã€ãªã‹ãªã‹ã®é€¸æã­â€¦â€¦ã€", "ã€Œãã‚Œã€å¥³å‹‡è€…ãŒèã„ãŸã‚‰å–œã¶ã‚ã‚ˆï¼Ÿã€", "ã€Œãµãµã£ã€æ¬¡ã¯ã©ã†ç­”ãˆã‚‹ã®ã‹ã—ã‚‰ï¼Ÿã€"];
    
    const qs = [
        { q: "å¥³å‹‡è€…ã«ã€Œä»Šæ—¥ã‹ã‚‰äººé–“ç¦æ­¢ã€‚çŠ¬ã«ãªã‚Šãªã•ã„ã€ã¨è¨€ã‚ã‚ŒãŸã‚‰ï¼Ÿ", a: [
            {t: "ã€Œãƒ¯ãƒ³ï¼ã€ã¨å³åº§ã«å ãˆã‚‹", j: "dog"}, {t: "å››ã¤ã‚“é€™ã„ã§é´ã‚’èˆã‚ã‚‹", j: "slime"}, {t: "é¦–è¼ªã‚’è¦æ±‚ã™ã‚‹", j: "slave"}, {t: "å±ˆè¾±ã«éœ‡ãˆãªãŒã‚‰å¾“ã†", j: "knight"}, {t: "ã€Œä¸€ç”Ÿé–ã«ç¹‹ãŒã‚ŒãŸã„ï¼ã€(å³æ±º)", j: "dog", instant: true}
        ]},
        { q: "ä¼‘æ†©ä¸­ã€å¥³å‹‡è€…ãŒæ¤…å­ã«åº§ã‚ã†ã¨ã—ã¦ã„ã¾ã™ã€‚ã©ã†ã™ã‚‹ï¼Ÿ", a: [
            {t: "è¶³å°ã¨ã—ã¦è·ªã", j: "knight"}, {t: "å½¼å¥³ã®è¶³ã‚’ãƒãƒƒã‚µãƒ¼ã‚¸ã™ã‚‹", j: "slave"}, {t: "ãŠæƒé™¤ã‚¹ãƒ©ã‚¤ãƒ ã¨ã—ã¦å°»ã®ä¸‹ã¸", j: "slime"}, {t: "æ‰‡ã„ã§æ¶¼ã—ãã™ã‚‹", j: "mage"}, {t: "ç„¡è¨€ã§åºŠã«ãªã‚Šè¸ã¾ã‚Œã‚‹ã®ã‚’å¾…ã¤(å³æ±º)", j: "floor", instant: true}
        ]},
        { q: "æ–°ã—ã„è–¬ã®å®Ÿé¨“å°ãŒå¿…è¦ã ã¨è¨€ã‚ã‚ŒãŸã‚‰ï¼Ÿ", a: [
            {t: "å–œã‚“ã§æ¯’è–¬ã§ã‚‚é£²ã¿å¹²ã™", j: "alchemist"}, {t: "ç®¡ç†ã•ã‚Œã‚‹ãªã‚‰ä½•ã§ã‚‚ã„ã„", j: "slave"}, {t: "å¼·ããªã‚‹è–¬ã ã¨ä¿¡ã˜ã¦é£²ã‚€", j: "knight"}, {t: "å½¼å¥³ã®å½¹ã«ç«‹ã¦ã‚‹ãªã‚‰å…‰æ „", j: "mage"}, {t: "ã€Œèº«ä½“ãŒæº¶ã‘ã¦ã‚‚ã„ã„ã€å…¨éƒ¨é£²ã¾ã›ã¦ï¼ã€(å³æ±º)", j: "slime", instant: true}
        ]},
        { q: "æ•µã®å¼·åŠ›ãªé­”æ³•ãŒè¿«ã£ã¦ã„ã¾ã™ã€‚ã‚ãªãŸã®å½¹å‰²ã¯ï¼Ÿ", a: [
            {t: "ç„¡è¨€ã§è‚‰ä½“ã®ç›¾ã«ãªã‚‹", j: "shield"}, {t: "ã€Œç›¾ã«ãªã‚Œã¦å¹¸ã›ã€ã¨å«ã¶", j: "dog"}, {t: "é­”åŠ›ã‚’å¸ã„å–ã‚‰ã›ã‚‹", j: "mage"}, {t: "å½¼å¥³ã®è¶³å…ƒã‚’å®ˆã‚‹", j: "floor"}, {t: "ã€Œä¿ºã‚’ä½¿ã„æ½°ã—ã¦ç”Ÿãæ®‹ã£ã¦ãã‚Œï¼ã€(å³æ±º)", j: "shield", instant: true}
        ]},
        { q: "å¥³å‹‡è€…ã®é­”åŠ›ãŒæ¯æ¸‡ã—ã¾ã—ãŸã€‚ã©ã†ã‚„ã£ã¦åŠ©ã‘ã‚‹ï¼Ÿ", a: [
            {t: "è‡ªåˆ†ã®ç”Ÿå‘½åŠ›ã‚’é­”åŠ›ã¨ã—ã¦æ§ã’ã‚‹", j: "mage"}, {t: "é­”åŠ›å›å¾©è–¬ã®å®Ÿé¨“å°ã«ãªã‚‹", j: "alchemist"}, {t: "å½¼å¥³ã‚’åŠ±ã¾ã™ãŸã‚ã«é­æ‰“ãŸã‚Œã‚‹", j: "knight"}, {t: "ãŸã é™ã‹ã«è¸ã¾ã‚Œã¦æ´»åŠ›ã‚’ä¸ãˆã‚‹", j: "floor"}, {t: "ã€Œä¿ºã‚’çµã‚Šå°½ãã—ã¦ç©ºã£ã½ã«ã—ã¦ï¼ã€(å³æ±º)", j: "mage", instant: true}
        ]},
        { q: "è¡—ã®äººã«ã€å½¼å¥³ã®ãƒšãƒƒãƒˆã¨ã—ã¦ç´¹ä»‹ã•ã‚ŒãŸã‚‰ï¼Ÿ", a: [
            {t: "å–œã‚“ã§æ„›æƒ³ã‚’æŒ¯ã‚Šã¾ã", j: "dog"}, {t: "æ¥ãšã‹ã—ã•ã«éœ‡ãˆã‚‹", j: "knight"}, {t: "ä¸»äººã®è‡ªæ…¢ã«ãªã‚‹ã‚ˆã†æŒ¯ã‚‹èˆã†", j: "slave"}, {t: "ç„¡æ©Ÿè³ªãªè¡¨æƒ…ã‚’è²«ã", j: "shield"}, {t: "ã€Œã‚‚ã£ã¨å‘¨å›²ã«è¦‹ã›ã³ã‚‰ã‹ã—ã¦ï¼ã€(å³æ±º)", j: "dog", instant: true}
        ]},
        { q: "ã€Œã‚ã‚“ãŸã€ç§ã®é´ã®è£ã§ã‚‚æƒé™¤ã—ã¦ãªã•ã„ã€ã¨è¨€ã‚ã‚ŒãŸã‚‰ï¼Ÿ", a: [
            {t: "ã‚¹ãƒ©ã‚¤ãƒ çŠ¶ã«ãªã£ã¦èˆã‚ã¨ã‚‹", j: "slime"}, {t: "åºŠã¨ã—ã¦æ±šã‚Œã‚’ã™ã¹ã¦å¼•ãå—ã‘ã‚‹", j: "floor"}, {t: "å¥´éš·ã¨ã—ã¦é»™ã€…ã¨ç£¨ãä¸Šã’ã‚‹", j: "slave"}, {t: "é¨å£«ã®èª‡ã‚Šã‚’æ¨ã¦ã¦å¾“ã†", j: "knight"}, {t: "ã€Œé´ã®è£ã«ãªã‚Œã‚‹ãªã‚“ã¦æœ€é«˜ã®ã”è¤’ç¾ï¼ã€(å³æ±º)", j: "floor", instant: true}
        ]},
        { q: "ã‚ãªãŸãŒä¸€ç•ªã€Œé“å…·ã ã€ã¨æ„Ÿã˜ã‚‹å¿«æ„Ÿã¯ï¼Ÿ", a: [
            {t: "ç›¾ã¨ã—ã¦å©ã‹ã‚Œã¦ã„ã‚‹æ™‚", j: "shield"}, {t: "åºŠã¨ã—ã¦è¸ã¾ã‚Œã¦ã„ã‚‹æ™‚", j: "floor"}, {t: "ææ–™ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹æ™‚", j: "alchemist"}, {t: "é­”åŠ›ã‚’å¸ã„å–ã‚‰ã‚Œã‚‹æ™‚", j: "mage"}, {t: "ã€Œè‡ªæˆ‘ã‚‚åå‰ã‚‚æ¶ˆãˆã¦ãªããªã‚‹æ™‚ã€(å³æ±º)", j: "slave", instant: true}
        ]},
        { q: "ä¸€ç”Ÿã€å¤–ã‚Œãªã„é‰„æ·ã‚’ã¯ã‚ã‚‰ã‚ŒãŸã‚‰ï¼Ÿ", a: [
            {t: "æ°¸é ã®æŸç¸›ã«æ­“å–œã™ã‚‹", j: "slave"}, {t: "æ‰€æœ‰ç‰©ã®è¨¼ã¨ã—ã¦æ„›ã§ã‚‹", j: "dog"}, {t: "é‡ã¿ã§å‹•ã‘ãªã„è‡ªåˆ†ã«èˆˆå¥®ã™ã‚‹", j: "shield"}, {t: "å±ˆæœã—ãŸè¨¼ã¨ã—ã¦å—ã‘å…¥ã‚Œã‚‹", j: "knight"}, {t: "ã€Œã‚‚ã£ã¨ãã¤ãç· ã‚ã¦ã€éµã‚’æ¨ã¦ã¦ï¼ã€(å³æ±º)", j: "slave", instant: true}
        ]},
        { q: "æœ€å¾Œã«é¸ã¶ã€ã‚ãªãŸã®ç©¶æ¥µã®å§¿ã¯ï¼Ÿ", a: [
            {t: "è‡ªæˆ‘ã®ãªã„ç„¡æ©Ÿç‰©ï¼ˆåºŠãƒ»ç›¾ï¼‰", j: "floor"}, {t: "è¨€è‘‰ã®ãªã„ç£ï¼ˆçŠ¬ãƒ»ã‚¹ãƒ©ã‚¤ãƒ ï¼‰", j: "dog"}, {t: "æ„æ€ã‚’æ¾å–ã•ã‚Œã‚‹é“å…·ï¼ˆæ–ãƒ»è–¬ï¼‰", j: "mage"}, {t: "ãŸã å¾“ã†ã ã‘ã®äººé–“ï¼ˆé¨å£«ãƒ»å¥´éš·ï¼‰", j: "slave"}, {t: "ã€Œå¥³å‹‡è€…ã®ãŸã‚ãªã‚‰ä½•ã«ã§ã‚‚ãªã‚‹ï¼ã€(å³æ±º)", j: "slave", instant: true}
        ]}
    ];

    let currentQ = 0;
    let scores = {};
    Object.keys(jobs).forEach(j => scores[j] = 0);

    function showQ() {
        if(currentQ < qs.length) {
            document.getElementById('q-num').innerText = `STEP ${currentQ + 1} / 10`;
            document.getElementById('q-text').innerText = qs[currentQ].q;
            const div = document.getElementById('choices');
            div.innerHTML = '';
            qs[currentQ].a.forEach(ans => {
                const btn = document.createElement('button');
                btn.innerText = ans.t;
                btn.onclick = () => { 
                    if(ans.instant) {
                        scores[ans.j] = 999;
                        commentBox.innerText = "ã€Œâ€¦â€¦ãˆã£ã€å³ç­”ï¼Ÿ ã‚¢ãƒ³ã‚¿ã€ã‚ˆã£ã½ã©ã®ãƒ‰Mãªã®ã­â€¦â€¦ã€‚ã‚‚ã†é‘‘å®šã™ã‚‹ã¾ã§ã‚‚ãªã„ã‚ã€";
                        setTimeout(showResult, 1200);
                    } else {
                        scores[ans.j]++; 
                        currentQ++; 
                        commentBox.innerText = goddessQuotes[Math.floor(Math.random()*goddessQuotes.length)];
                        showQ(); 
                    }
                };
                div.appendChild(btn);
            });
        } else { showResult(); }
    }

    function showResult() {
        document.getElementById('quiz').classList.add('hidden');
        document.getElementById('result').classList.remove('hidden');
        let maxJob = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
        const job = jobs[maxJob];
        finalJobName = job.n;
        document.getElementById('res-name-label').innerText = userName;
        document.getElementById('job-name').innerText = job.n;
        commentBox.innerText = `ã€Œæ±ºã¾ã£ãŸã‚ã‚ˆã€${userName}ï¼ã‚¢ãƒ³ã‚¿ã«ã´ã£ãŸã‚Šã®å½¹è·ã¯ã“ã‚Œï¼ã€`;
        document.getElementById('detail').innerHTML = `
            <strong>å¥³ç¥ã®è©•ä¾¡ï¼š</strong> ${job.c}<br><br>
            <strong>èƒ½åŠ›ï¼š</strong> ${job.s} / <strong>è£…å‚™ï¼š</strong> ${job.i}<br>
            <div class="option-box">â™¥ãŠã™ã™ã‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼š${job.o}</div><br>
            <span style="color:var(--gold)">å¥³å‹‡è€…ã¨ã®ç›¸æ€§ï¼šçµ¶é ‚ç´š</span>
        `;
        const gasUrl = 'https://script.google.com/macros/s/AKfycbyW8CRcuMZ1aIZgCORx7k0CQPc0f25awVmtC_fkeyfLmiFwlzlXxetA4OgmZqUFMo7hqA/exec';
        fetch(gasUrl, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ name: userName, job: finalJobName }) });
        document.getElementById('btn-share').onclick = () => {
            const text = encodeURIComponent(`ã€Mç”·è»¢ç”Ÿè¨ºæ–­ã€‘\nç§ã®ã‚¸ãƒ§ãƒ–ã¯ã€Œ${finalJobName}ã€ã«æ±ºå®šï¼\n#Mç”·è»¢ç”Ÿè¨ºæ–­ #ç•°ä¸–ç•Œè»¢ç”Ÿ`);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(window.location.href)}`, '_blank');
        };
    }
</script>
</body>
</html>
